webpackJsonp([3],{LjgV:function(t,e){},RADo:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Dd8w"),s=a.n(r),i=a("Gu7T"),n=a.n(i),o={name:"TabBar",props:["protype"],data:function(){return{tabbarData:[{name:"全部商品",url:"/product/list/all/1"},{name:"已下架商品",url:"/product/list/offShelf/1"},{name:"库存警告商品",url:"/product/list/stock/1"}]}},computed:{currentMenu:function(){return this.$store.state.menu.currentMenu}},methods:{changeMenu:function(t){var e=[].concat(n()(this.currentMenu));e.splice(e.length-1,1,t.name),this.$store.commit("setMenu",e)}},filters:{barType:function(t){return t.split("/")[2]}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabbar"},[a("ul",{staticClass:"nav nav-tabs"},t._l(t.tabbarData,function(e,r){return a("li",{key:r,staticClass:"nav-item",on:{click:function(a){return t.changeMenu(e)}}},[a("router-link",{class:["nav-link",t.protype==e.url.split("/")[3].split("?")[0]?"active":""],attrs:{to:e.url}},[t._v(t._s(e.name))])],1)}),0)])},staticRenderFns:[]};var u={name:"ProductList",props:["protype","page"],components:{tabBar:a("VU/8")(o,c,!1,function(t){a("xyA1")},"data-v-38fef424",null).exports},data:function(){return{productData:[{pid:1,supplyid:1,brandid:1,pname:"法兰西胎玫瑰",artNo:"34524",specs:"80g",package:"罐",unitPrice:25,salePrice:23,stock:500,status:"1",creatTime:"2019-08-28T07:13:56.000Z",brandname:"喜福德"},{pid:2,supplyid:1,brandid:1,pname:"菊博士胎菊",artNo:"45612",specs:"70g",package:"包",unitPrice:22,salePrice:20,stock:300,status:"1",creatTime:"2019-08-28T07:13:43.000Z",brandname:"喜福德"},{pid:3,supplyid:1,brandid:1,pname:"洛神仙子洛神花玫瑰茄",artNo:"15644",specs:"45g",package:"盒",unitPrice:32,salePrice:28,stock:30,status:"0",creatTime:"2019-08-28T07:15:48.000Z",brandname:"喜福德"},{pid:4,supplyid:1,brandid:2,pname:"平阴玫瑰花茶干玫瑰",artNo:"65485",specs:"80g",package:"罐",unitPrice:30,salePrice:29,stock:455,status:"0",creatTime:"2019-08-28T07:17:12.000Z",brandname:"惠兴隆"},{pid:5,supplyid:1,brandid:2,pname:"浓香型茉莉花茶",artNo:"54158",specs:"70g",package:"包",unitPrice:59,salePrice:53,stock:300,status:"1",creatTime:"2019-08-28T07:18:01.000Z",brandname:"惠兴隆"}],totleCount:22,pagesize:5,currPage:Number(this.page),error:0,cancelDialog:!1,editProData:{},editProIndex:0,brandlist:[{bid:1,bname:"喜福德"},{bid:2,bname:"惠兴隆"},{bid:5,bname:"亦福堂"},{bid:7,bname:"乐开怀"}],routerkey:1}},computed:{currentMenu:function(){return this.$store.state.menu.currentMenu}},methods:{getProductData:function(){switch(this.protype){case"all":this.productData=[{pid:1,supplyid:1,brandid:1,pname:"法兰西胎玫瑰",artNo:"34524",specs:"80g",package:"罐",unitPrice:25,salePrice:23,stock:500,status:"1",creatTime:"2019-08-28T07:13:56.000Z",brandname:"喜福德"},{pid:2,supplyid:1,brandid:1,pname:"菊博士胎菊",artNo:"45612",specs:"70g",package:"包",unitPrice:22,salePrice:20,stock:300,status:"1",creatTime:"2019-08-28T07:13:43.000Z",brandname:"喜福德"},{pid:3,supplyid:1,brandid:1,pname:"洛神仙子洛神花玫瑰茄",artNo:"15644",specs:"45g",package:"盒",unitPrice:32,salePrice:28,stock:30,status:"0",creatTime:"2019-08-28T07:15:48.000Z",brandname:"喜福德"},{pid:4,supplyid:1,brandid:2,pname:"平阴玫瑰花茶干玫瑰",artNo:"65485",specs:"80g",package:"罐",unitPrice:30,salePrice:29,stock:455,status:"0",creatTime:"2019-08-28T07:17:12.000Z",brandname:"惠兴隆"},{pid:5,supplyid:1,brandid:2,pname:"浓香型茉莉花茶",artNo:"54158",specs:"70g",package:"包",unitPrice:59,salePrice:53,stock:300,status:"1",creatTime:"2019-08-28T07:18:01.000Z",brandname:"惠兴隆"}];break;case"offShelf":this.productData=[{pid:3,supplyid:1,brandid:1,pname:"洛神仙子洛神花玫瑰茄",artNo:"15644",specs:"45g",package:"盒",unitPrice:32,salePrice:28,stock:30,status:"0",creatTime:"2019-08-28T07:15:48.000Z",brandname:"喜福德"},{pid:4,supplyid:1,brandid:2,pname:"平阴玫瑰花茶干玫瑰",artNo:"65485",specs:"80g",package:"罐",unitPrice:30,salePrice:29,stock:455,status:"0",creatTime:"2019-08-28T07:17:12.000Z",brandname:"惠兴隆"}];break;case"stock":this.productData=[{pid:3,supplyid:1,brandid:1,pname:"洛神仙子洛神花玫瑰茄",artNo:"15644",specs:"45g",package:"盒",unitPrice:32,salePrice:28,stock:30,status:"0",creatTime:"2019-08-28T07:15:48.000Z",brandname:"喜福德"}]}this.productData.length>0?this.error=0:this.error=1},editProduct:function(t){var e=this;this.editProData=s()({},this.productData[t]),this.editProIndex=t,this.cancelDialog=!0,this.productData[t].status=1,this.brandlist.forEach(function(t){t.bname==e.editProData.brandname&&(e.editProData.brandid=t.bid,delete e.editProData.brandname)})},editProductSub:function(){this.cancelDialog=!1,this.productData[this.editProIndex]=s()({},this.editProData),this.$message({type:"success",message:"恭喜，商品信息修改成功！"})},goOnSale:function(t,e){var a=this;this.$confirm("此操作将上架该商品，将展示在售卖产品中， 是否继续？","上架商品",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.productData[e].status=1,a.$message({type:"success",message:"商品已上架！!"})}).catch(function(){a.$message({type:"info",message:"已取消操作"})})},endOfSale:function(t,e){var a=this;this.$confirm("此操作将下架该商品，在售商品中不再展示此商品， 是否继续？","下架商品",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.productData[e].status=0,a.$message({type:"success",message:"商品已下架！!"})}).catch(function(){a.$message({type:"info",message:"已取消操作"})})},delProduct:function(t){var e=this;this.$confirm("此操作将永久删除该商品， 是否继续？","删除商品",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.productData.splice(t,1),e.$message({type:"success",message:"商品已删除！!"})}).catch(function(){e.$message({type:"info",message:"已取消操作"})})}},watch:{currPage:function(){var t=this.$router.currentRoute.path.split("/");t[t.length-1]=this.currPage,this.$router.push(t.join("/")).catch(function(t){}),this.getProductData()},protype:function(){this.currPage!=Number(this.page)?this.currPage=Number(this.page):this.getProductData(),this.routerkey=(new Date).getTime()}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{key:t.routerkey,staticClass:"main"},[a("h3",[t._v(t._s(t.currentMenu[1])+" "),a("small",[t._v(t._s(t.currentMenu[2]?t.currentMenu[2]:""))])]),t._v(" "),a("tabBar",{attrs:{protype:t.protype}}),t._v(" "),a("div",{staticClass:"msgbox"},[a("div",{staticClass:"search classfix"},[a("div",{staticClass:"search clearfix"},[a("div",{staticClass:"float-left w-75 form"},[t.error?t._e():a("div",{staticClass:" form-row align-items-center"},[a("input",{staticClass:"col-sm-3 form-control",attrs:{type:"text",name:"",id:"",placeholder:"请输入搜索内容"}}),t._v(" "),a("router-link",{staticClass:"col-sm-1 btn btn-info",attrs:{to:"/"}},[t._v("搜索")])],1)]),t._v(" "),a("div",{staticClass:"float-right"},[a("router-link",{staticClass:"btn btn-primary",attrs:{to:"/product/add"}},[t._v("增加新商品")])],1)])]),t._v(" "),t.error?t._e():a("table",{staticClass:"table"},[t._m(0),t._v(" "),a("tbody",t._l(t.productData,function(e,r){return a("tr",{key:r},[a("td",[t._v(t._s(e.pname))]),t._v(" "),a("td",[t._v(t._s(e.brandname))]),t._v(" "),a("td",[t._v(t._s(e.artNo))]),t._v(" "),a("td",[t._v(t._s(e.specs)+" / "+t._s(e.package))]),t._v(" "),a("td",[t._v(t._s(e.unitPrice))]),t._v(" "),a("td",[t._v(t._s(e.salePrice))]),t._v(" "),a("td",[a("span",{class:{"btn btn-danger btn-sm":0!=e.status&&e.stock<50}},[t._v(t._s(e.stock))])]),t._v(" "),a("td",[a("span",{class:{"text-danger":0!=e.status&&e.stock<50,"text-primary":1==e.status}},[t._v("\n                              "+t._s(0==e.status?"已下架":e.stock<50?"库存告急":"销售中")+"\n                          ")])]),t._v(" "),a("td",[a("div",{staticClass:"btn-group btn-group-sm"},[a("button",{staticClass:"btn btn-info",on:{click:function(e){return t.editProduct(r)}}},[t._v("修改")]),t._v(" "),0==e.status?a("button",{staticClass:"btn btn-success",on:{click:function(a){return t.goOnSale(e.pid,r)}}},[t._v("上架")]):t._e(),t._v(" "),0!=e.status?a("button",{staticClass:"btn btn-warning",on:{click:function(a){return t.endOfSale(e.pid,r)}}},[t._v("下架")]):t._e(),t._v(" "),a("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.delProduct(r)}}},[t._v("删除")])])])])}),0)]),t._v(" "),t.totleCount>0?a("el-pagination",{staticClass:"text-center",attrs:{layout:"prev, pager, next","page-size":t.pagesize,"current-page":t.currPage,total:t.totleCount},on:{"update:currentPage":function(e){t.currPage=e},"update:current-page":function(e){t.currPage=e}}}):t._e(),t._v(" "),t.error?a("div",{staticClass:"error text-danger text-center"},[0==t.totleCount?a("p",[t._v("暂无相关数据，您可点击右上方按钮进行添加！")]):t._e(),t._v(" "),t.totleCount>0?a("p",[t._v("此页已无相关数据，请点击其他页码进行查看！")]):t._e()]):t._e(),t._v(" "),a("el-dialog",{attrs:{title:"商品编辑",visible:t.cancelDialog,width:"60%"},on:{"update:visible":function(e){t.cancelDialog=e}}},[a("table",{staticClass:"w-100"},[a("tbody",[a("tr",[a("th",[t._v("产品供应商：")]),a("td",[t._v(t._s(t.$store.state.user.userData.uname))])]),t._v(" "),a("tr",[a("th",{attrs:{width:"150px"}},[t._v("产品中文名称：")]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editProData.pname,expression:"editProData.pname",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.editProData.pname},on:{input:function(e){e.target.composing||t.$set(t.editProData,"pname",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),t._v(" "),a("tr",[a("th",[t._v("产品品牌：")]),a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.editProData.brandid,expression:"editProData.brandid"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.editProData,"brandid",e.target.multiple?a:a[0])}}},t._l(t.brandlist,function(e){return a("option",{key:e.bid,domProps:{value:e.bid}},[t._v(t._s(e.bname))])}),0)])]),t._v(" "),a("tr",[a("th",[t._v("产品货号：")]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editProData.artNo,expression:"editProData.artNo",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.editProData.artNo},on:{input:function(e){e.target.composing||t.$set(t.editProData,"artNo",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),t._v(" "),a("tr",[a("th",[t._v("产品规格：")]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editProData.specs,expression:"editProData.specs",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.editProData.specs},on:{input:function(e){e.target.composing||t.$set(t.editProData,"specs",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),t._v(" "),a("tr",[a("th",[t._v("产品单价：")]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editProData.unitPrice,expression:"editProData.unitPrice",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.editProData.unitPrice},on:{input:function(e){e.target.composing||t.$set(t.editProData,"unitPrice",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),t._v(" "),a("tr",[a("th",[t._v("促销单价：")]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editProData.salePrice,expression:"editProData.salePrice",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.editProData.salePrice},on:{input:function(e){e.target.composing||t.$set(t.editProData,"salePrice",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),t._v(" "),a("tr",[a("th",[t._v("产品库存：")]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.editProData.stock,expression:"editProData.stock",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.editProData.stock},on:{input:function(e){e.target.composing||t.$set(t.editProData,"stock",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])])])]),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"btn btn-secondary",on:{click:function(e){t.cancelDialog=!1}}},[t._v("取 消")]),t._v(" "),a("button",{staticClass:"btn btn-primary",on:{click:t.editProductSub}},[t._v("确认提交")])])])],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",[t._v("产品名称")]),t._v(" "),a("th",[t._v("品牌")]),t._v(" "),a("th",[t._v("货号")]),t._v(" "),a("th",[t._v("规格")]),t._v(" "),a("th",[t._v("单价")]),t._v(" "),a("th",[t._v("促销价")]),t._v(" "),a("th",[t._v("库存")]),t._v(" "),a("th",[t._v("状态")]),t._v(" "),a("th",[t._v("操作")])])}]};var l=a("VU/8")(u,d,!1,function(t){a("LjgV")},"data-v-141eb774",null);e.default=l.exports},xyA1:function(t,e){}});
//# sourceMappingURL=3.4c63016f32068945cc98.js.map