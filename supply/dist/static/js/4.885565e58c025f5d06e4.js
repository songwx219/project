webpackJsonp([4],{"/3hG":function(s,t){},FSQi:function(s,t){},Quw4:function(s,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("mvHQ"),i=e.n(a),r=e("Dd8w"),o=e.n(r),n=e("NYxO"),c=e("7t+N"),l=e.n(c),d={name:"YanzhengCode",props:["reload"],data:function(){return{dragStatus:!1,sx:0,curX:0,ctx:null,width:600,height:300,img1:new Image,img2:new Image,curVal:[309,356,378,419,487,414,322,431,305,496],id:null,codeBoxStatus:!1}},methods:{init:function(s){var t=this;this.curX=0,localStorage.getItem("code")?alert("您已通过验证，请填写完毕直接提交您的信息！"):(this.codeBoxStatus=!0,l()(".code_box .loading").addClass("show"),this.id=Math.ceil(10*Math.random()),this.img1.src="http://songwx219.github.io/node/public/code/1/"+this.id+"-1.png",this.img1.onload=function(){t.img2.src="http://songwx219.github.io/node/public/code/1/"+t.id+"-2.png"},this.img2.onload=function(){t.update(0),l()(".code_box .loading").removeClass("show"),s&&s()})},update:function(s){this.curX=2*s,this.ctx.clearRect(0,0,this.width,this.height),this.ctx.drawImage(this.img1,0,0,this.width,this.height),this.ctx.drawImage(this.img2,this.curX,0,120,this.height)},dragStart:function(s){this.dragStatus=!0,this.sx=s.clientX,l()(".slider").addClass("drag")},dragMove:function(s){this.dragStatus&&s.clientX-this.sx>=-2&&s.clientX-this.sx<=262&&(l()(".slider_block").css("transform","translateX("+(s.clientX-this.sx)+"px)"),l()(".slider_done").css({display:"block",width:s.clientX-this.sx+20+"px"}),this.update(s.clientX-this.sx))},dragEnd:function(){var s=this;this.dragStatus=!1,l()(".code_box .loading").addClass("show");var t=this.curX+10;Math.abs(t-this.curVal[this.id-1])<10?(l()(".code_box .loading .box").addClass("text-success").html('<span class="fa fa-check-circle "></span><span>验证成功</span>'),localStorage.setItem("code",!0),setTimeout(function(){l()(".code_box .loading").removeClass("show"),l()(".code_box .loading .box").removeClass("text-success").html('<i class="fa fa-spinner"></i>'),s.codeBoxStatus=!1,l()(".code span.button").removeClass("btn-warning").addClass("btn-success").html('<i class="fa fa-check-circle "> </i> 验证成功')},300)):(l()(".slider").addClass("err"),l()(".code_box .loading .box").html('<span class="fa fa-exclamation-circle "></span><span>验证失败</span>'),this.init(function(){l()(".slider").removeClass("err"),l()(".slider").removeClass("drag"),l()(".code_box .loading .box").html('<i class="fa fa-spinner"></i>'),l()(".slider_block").css("transform","translateX(0px)"),l()(".slider_done").css({display:"none",width:"0px"})}))}},mounted:function(){this.ctx=l()("#VerifiCode")[0].getContext("2d"),window.onbeforeunload=function(s){localStorage.removeItem("code")}},destroyed:function(){localStorage.removeItem("code")},watch:{reload:function(){l()(".code span.button").hasClass("btn-success")&&(l()(".code span.button").addClass("btn-warning").removeClass("btn-success").html('<i class="fa fa-info-circle "></i> 点击完成安全验证'),l()(".slider").removeClass("drag"),l()(".code_box .loading .box").html('<i class="fa fa-spinner"></i>'),l()(".slider_block").css("transform","translateX(0px)"),l()(".slider_done").css({display:"none",width:"0px"}))}}},u={render:function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"code"},[e("span",{staticClass:"btn btn-block btn-warning  btn-lg button",on:{click:s.init}},[e("i",{staticClass:"fa fa-info-circle "}),s._v(" 点击完成安全验证")]),s._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:s.codeBoxStatus,expression:"codeBoxStatus"}],staticClass:"code_box"},[e("canvas",{attrs:{id:"VerifiCode",width:s.width,height:s.height}}),s._v(" "),e("div",{staticClass:"button text-primary d-flex align-items-center"},[e("div",{staticClass:"refresh pr-2",on:{click:s.init}},[e("i",{staticClass:"fa fa-refresh"})]),s._v(" "),e("div",{staticClass:"remove",on:{click:function(t){s.codeBoxStatus=!1}}},[e("i",{staticClass:"fa fa-remove"})])]),s._v(" "),e("div",{staticClass:"slider",on:{mousemove:function(t){return s.dragMove(t)},mouseup:s.dragEnd}},[s._m(0),s._v(" "),e("div",{staticClass:"slider_done"}),s._v(" "),e("div",{staticClass:"slider_block",on:{mousedown:function(t){return s.dragStart(t)}}},[e("i",{staticClass:"fa fa-reorder"})])]),s._v(" "),s._m(1)])])},staticRenderFns:[function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"slider_cont"},[t("span",{staticClass:"text"},[this._v("向右拖动滑块填充拼图 ")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"loading text-danger"},[t("div",{staticClass:"box d-flex flex-column justify-content-center w-100 h-100 mr-0 "},[t("i",{staticClass:"fa fa-spinner"})])])}]};var h={name:"Login",components:{yzhCode:e("VU/8")(d,u,!1,function(s){e("/3hG")},"data-v-1f4a7342",null).exports},data:function(){return{codeStatus:1,user:{username:"",password:"",errmsg:"",errstatus:null}}},methods:o()({loginOnClick:function(){this.user.username,this.user.password;if(localStorage.getItem("code"))if(""==this.user.username)this.user.errmsg="您输入的用户名不存在！",this.user.errstatus=0,this.$message.error(this.user.errmsg),localStorage.removeItem("code"),this.codeStatus++;else if(""==this.user.password)this.user.errmsg="您输入的密码不正确！",this.user.errstatus=0,this.$message.error(this.user.errmsg),localStorage.removeItem("code"),this.codeStatus++;else{this.user.errmsg="";var s={sid:1,uname:this.user.username};this.setUserData(s),s.timer=(new Date).getTime(),localStorage.setItem("user",i()(s)),this.$message({message:"恭喜您，登录成功！",type:"success"}),this.$router.push("/"),localStorage.removeItem("code")}else localStorage.getItem("code")||(this.user.errmsg="请完成验证码验证后再提交！",this.user.errstatus=0,this.$message.error(this.user.errmsg))}},Object(n.b)(["setUserData"]))},m={render:function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",[s._m(0),s._v(" "),e("section",{staticClass:"login-box"},[e("div",{staticClass:"login container clearfix"},[e("div",{staticClass:"logo"}),s._v(" "),e("div",{staticClass:"main"},[e("h2",[s._v("用户登录")]),s._v(" "),e("p",{directives:[{name:"show",rawName:"v-show",value:""!=s.user.errmsg,expression:'user.errmsg!=""'}],staticClass:"text-danger"},[s._v(s._s(s.user.errmsg))]),s._v(" "),e("div",{class:["group clearfix",0==s.user.errstatus?"error":""]},[e("div",{staticClass:"icon float-left"}),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:s.user.username,expression:"user.username",modifiers:{trim:!0}}],staticClass:"float-left",attrs:{type:"text",id:"username"},domProps:{value:s.user.username},on:{input:function(t){t.target.composing||s.$set(s.user,"username",t.target.value.trim())},blur:function(t){return s.$forceUpdate()}}})]),s._v(" "),e("div",{staticClass:"group clearfix"},[e("div",{staticClass:"icon pwd float-left"}),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:s.user.password,expression:"user.password",modifiers:{trim:!0}}],class:["float-left",1==s.user.errstatus?"error":""],attrs:{type:"password",id:"password"},domProps:{value:s.user.password},on:{input:function(t){t.target.composing||s.$set(s.user,"password",t.target.value.trim())},blur:function(t){return s.$forceUpdate()}}})]),s._v(" "),e("yzh-code",{attrs:{reload:s.codeStatus}}),s._v(" "),e("input",{staticClass:"btn btn-primary btn-block btn-lg",attrs:{type:"button",value:"登录"},on:{click:s.loginOnClick}}),s._v(" "),s._m(1)],1)])]),s._v(" "),e("footer",[s._v("songwx 版权所有")])])},staticRenderFns:[function(){var s=this.$createElement,t=this._self._c||s;return t("header",[t("img",{attrs:{src:"static/images/logo.png",alt:""}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",{staticClass:"forget"},[t("a",{attrs:{href:"#"}},[this._v("忘记密码？")])])}]};var g=e("VU/8")(h,m,!1,function(s){e("FSQi")},"data-v-11b82630",null);t.default=g.exports}});
//# sourceMappingURL=4.885565e58c025f5d06e4.js.map